{"version":3,"sources":["images/logo-wopa.jpg","images/locate.svg","images/bij.png","images/tent.png","images/tree.png","images/windmill.png","images/camera.svg","images/download.svg","utils/leaflet-helpers.js","utils/wfs-helper.js","index.js","graph/graph.js","enums/index.js","plot-viewer/plot-viewer.js","utils/store.js","create-plot-form/index.js","viewer/viewer.js","open-layers/open-layers.js","pic/index.js","header/index.js","floating-button/index.js","plots/index.js","card/index.js","job-detail/index.js","create-activity-form/index.js","activity/index.js","App.js","serviceWorker.js"],"names":["module","exports","getBounds","mapRef","current","leafletElement","getCrs","options","crs","createWfs","name","url","resource","typename","minZoom","maxZoom","features","retrieveWFSFeatures","componentContext","a","Object","entries","state","wfsServices","filter","key","selectedWfsService","map","value","retrieveFeatures","bounds","setState","produce","draft","stateFeatures","filteredFeatures","feature","find","stateFeature","id","push","getPlotsGeoJSONData2","southWest","project","getSouthWest","northEast","getNorthEast","bbox","x","y","wfsUrl","getPlots","startIndex","fetch","response","json","totalFeatures","console","log","length","nextResponse","nextJson","onPointToLayer","latlng","circleMarker","radius","fillColor","color","weight","opacity","fillOpacity","selectWfsService","e","target","zoom","forceUpdate","deferredPrompt","React","Component","activities","MEST","PLOW","SEEDBED","SEED","PLANT","PROTECTION","FERTILIZER","HARVEST","CROPS","POTATO","BROCCOLI","SUGARBEET","MAIZE","WHEAT","materialLists","CATTLE","POULTRY","COMPOST","BG11","HORSEMASTER","FANATIC","EDONIA","KUMA","BINTJE","SPUNTA","RADAR","REDSUN","NEMATHORIN","MANKAR","MEGA","THIACLOPRID","2018","KAS","SUPERFOSFAAT","employees","1","2","PlotViewer","LayersControl","BaseLayer","Overlay","plot","mapStyle","createRef","useEffect","fitBounds","padding","Map","ref","style","className","center","scrollWheelZoom","doubleClickZoom","closePopupOnClick","dragging","zoomSnap","zoomDelta","trackResize","touchZoom","zoomControl","layersControl","attributionControl","WMSTileLayer","layers","FeatureGroup","GeoJSON","data","ContextStore","createContext","initialState","jobs","employee","date","customer","customerNumber","adres","jobNumber","activity","remark","material","type","geometry","coordinates","geometry_name","properties","objectid","gewascategorie","gewas","gewascode","area","reducer","action","job","group","ContextStoreProvider","children","useReducer","dispatch","Provider","Option","Consumer","CreatePlotForm","selectedPlot","visible","onCancel","onCreate","useState","setActivity","setMaterial","useContext","formRef","onClose","resetFields","title","placement","height","marginBottom","borderRadius","layout","onFinish","result","toDate","toISOString","initialValues","keys","moment","Item","label","rules","required","message","format","width","onChange","textAlign","right","bottom","borderTop","background","onClick","marginRight","htmlType","Viewer","props","handleFeatureClick","selectedLayer","pm","disable","removeLayer","setStyle","layer","bringToFront","selectedFeature","lat","lng","selectPlot","L","addTo","setZIndex","enable","allowSelfIntersection","savePlot","toGeoJSON","showModal","cancelPlot","stopLocate","locateUser","locate","setView","watch","enableHighAccuracy","handleLocationFound","accuracy","marker","bindPopup","openPopup","circle","createJob","history","handleCancel","zoomEnd","prev","curr","getZoom","dragged","dragEnd","lon","wfss","forEach","wfs","registerWFS","this","undefined","addControls","position","drawCircle","editMode","dragMode","drawPolyline","drawCircleMarker","drawMarker","to","src","logo","alt","maxLength","first","last","toString","pre","substr","app","shorten","icon","faTimes","faCheck","onZoomEnd","onDragEnd","handleClick","onLocationfound","AttributionControl","ZoomControl","checked","LayerGroup","TileLayer","attribution","transparent","onFeatureClick","geoJSONData","pointToLayer","createFeatureLayers","PureComponent","OpenLayers","onRadioChange","radio","currentTarget","source","OSM","view","View","prevProps","prevState","currentLayer","vectorSource","VectorSource","readFeatures","Bestemmingsplan","VectorLayer","Style","fill","Fill","stroke","Stroke","addLayer","vectorSource2","Natuur","htmlFor","windmill","tree","bij","tent","Pic","streaming","video","canvas","photo","startbutton","startrecording","paintVideo","getContext","drawImage","paused","requestAnimationFrame","useCamera","muted","setAttribute","play","navigator","mediaDevices","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","Promise","resolve","reject","call","Error","document","createElement","playsinline","addEventListener","facingMode","then","stream","srcObject","window","URL","createObjectURL","catch","err","ev","takepicture","preventDefault","toDataURL","accept","capture","onclick","AntdHeader","Header","SubMenu","pathname","useLocation","zIndex","paddingLeft","paddingRight","FloatingButton","shape","faPlus","Plots","display","float","borderTopLeftRadius","borderBottomLeftRadius","backgroundColor","borderTopRightRadius","borderBottomRightRadius","fontSize","PlotCard","Meta","cover","bodyStyle","selectFirstInnerMostArray","array","index","Array","isArray","JobDetail","number","useParams","setJob","tmp","description","href","rel","hoverable","lineHeight","marginTop","CreateActivityForm","time","defaultOpenValue","Activity","Date","getTime","startTime","setTime","timer","setTimer","setShowModal","setInterval","distance","hours","Math","floor","minutes","seconds","faStopwatch","class","clearInterval","faStop","App","exact","path","component","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","ReactDOM","render","basename","process","promptInstall","prompt","getElementById","origin","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.a3ec7406.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo-wopa.35536e4a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/locate.100f6971.svg\";","module.exports = __webpack_public_path__ + \"static/media/bij.baccab47.png\";","module.exports = __webpack_public_path__ + \"static/media/tent.8fb47b2d.png\";","module.exports = __webpack_public_path__ + \"static/media/tree.f3c11276.png\";","module.exports = __webpack_public_path__ + \"static/media/windmill.cc3908f0.png\";","module.exports = __webpack_public_path__ + \"static/media/camera.8c1ff4f8.svg\";","module.exports = __webpack_public_path__ + \"static/media/download.dbfe7e69.svg\";","export function getBounds(mapRef) {\r\n  return mapRef.current.leafletElement.getBounds();\r\n}\r\n\r\nexport function getCrs(mapRef) {\r\n  return mapRef.current.leafletElement.options.crs;\r\n}\r\n","import React from \"react\";\r\nimport produce from \"immer\";\r\nimport { getBounds, getCrs } from \"./leaflet-helpers\";\r\nimport { GeoJSON, FeatureGroup, LayersControl } from \"react-leaflet\";\r\nimport { circleMarker } from \"leaflet\";\r\n\r\nexport function initialState(componentContext) {\r\n  return {\r\n    zoom: 10,\r\n    wfsServices: {},\r\n    selectedWfsService: \"\",\r\n    dragged: false\r\n  };\r\n}\r\n\r\nexport function createWfs(name, url, resource, typename, minZoom, maxZoom) {\r\n  return { name, url, resource, typename, minZoom, maxZoom, features: [] };\r\n}\r\n\r\nexport function registerWFS(componentContext, ...wfss) {\r\n  componentContext.setState(\r\n    produce(componentContext.state, draft => {\r\n      draft.selectedWfsService = wfss[0].typename;\r\n      wfss.forEach(wfs => (draft.wfsServices[wfs.typename] = wfs));\r\n    })\r\n  );\r\n  console.log(componentContext.state);\r\n}\r\n\r\nexport async function retrieveWFSFeatures(componentContext) {\r\n  return Object.entries(componentContext.state.wfsServices)\r\n    .filter(([key, value]) => key === componentContext.state.selectedWfsService)\r\n    .map(([key, value]) => {\r\n      return retrieveFeatures(\r\n        componentContext,\r\n        value.url,\r\n        value.resource,\r\n        value.typename\r\n      );\r\n    });\r\n}\r\n\r\nexport async function retrieveFeatures(\r\n  componentContext,\r\n  url,\r\n  resource,\r\n  typename\r\n) {\r\n  const bounds = getBounds(componentContext.mapRef);\r\n  const crs = getCrs(componentContext.mapRef);\r\n\r\n  componentContext.setState(\r\n    produce(componentContext.state, draft => {\r\n      draft.wfsServices[typename].features = [];\r\n    })\r\n  );\r\n  for await (const features of getPlotsGeoJSONData2(\r\n    componentContext,\r\n    bounds,\r\n    crs,\r\n    url,\r\n    resource,\r\n    typename\r\n  )) {\r\n    const stateFeatures = componentContext.state.wfsServices[typename].features;\r\n    const filteredFeatures = features.filter(\r\n      feature =>\r\n        !stateFeatures.find(stateFeature => feature.id === stateFeature.id)\r\n    );\r\n    componentContext.setState(\r\n      produce(componentContext.state, draft => {\r\n        draft.wfsServices[typename].features.push(...filteredFeatures);\r\n      })\r\n    );\r\n  }\r\n}\r\n\r\nasync function* getPlotsGeoJSONData2(\r\n  componentContext,\r\n  bounds,\r\n  crs,\r\n  url,\r\n  resource,\r\n  typename\r\n) {\r\n  const southWest = crs.project(bounds.getSouthWest());\r\n  const northEast = crs.project(bounds.getNorthEast());\r\n\r\n  const bbox = `${southWest.x},${southWest.y},${northEast.x},${northEast.y}`;\r\n\r\n  const wfsUrl = `${url}/${resource}/wfs`;\r\n  const getPlots = startIndex =>\r\n    fetch(\r\n      `${wfsUrl}?SERVICE=WFS&REQUEST=GetFeature&VERSION=2.0.0&TYPENAMES=${typename}&OUTPUTFORMAT=json&STARTINDEX=${startIndex}&COUNT=100&SRSNAME=urn:ogc:def:crs:EPSG::4326&BBOX=${bbox},urn:ogc:def:crs:EPSG::3857`\r\n    );\r\n  const response = await getPlots(0);\r\n  const json = await response.json();\r\n  yield json.features;\r\n  const totalFeatures = json.totalFeatures;\r\n  console.log(totalFeatures);\r\n  while (\r\n    componentContext.state.wfsServices[typename].features.length < totalFeatures\r\n  ) {\r\n    const nextResponse = await getPlots(\r\n      componentContext.state.wfsServices[typename].features.length\r\n    );\r\n    const nextJson = await nextResponse.json();\r\n    yield nextJson.features;\r\n  }\r\n}\r\n\r\nexport function handleZoomEnd(componentContext) {\r\n  return e => {\r\n    const prev = componentContext.state.zoom;\r\n    const curr = e.target.getZoom();\r\n    console.log(prev, curr);\r\n    const minZoom =\r\n      componentContext.state.wfsServices[\r\n        componentContext.state.selectedWfsService\r\n      ].minZoom;\r\n    const maxZoom =\r\n      componentContext.state.wfsServices[\r\n        componentContext.state.selectedWfsService\r\n      ].maxZoom;\r\n    componentContext.setState(\r\n      produce(componentContext.state, draft => {\r\n        draft.zoom = curr;\r\n      })\r\n    );\r\n    // TODO: Switch statement?\r\n    if (prev < minZoom && curr >= minZoom) {\r\n      retrieveWFSFeatures(componentContext);\r\n      componentContext.setState(\r\n        produce(componentContext.state, draft => {\r\n          draft.dragged = false;\r\n        })\r\n      );\r\n    } else if (prev >= minZoom && curr < minZoom) {\r\n      componentContext.setState(\r\n        produce(componentContext.state, draft => {\r\n          draft.wfsServices[\r\n            componentContext.state.selectedWfsService\r\n          ].features = [];\r\n        })\r\n      );\r\n    } else if (curr === minZoom + 1 && curr < prev) {\r\n      // If zoomed out to the max zoom level then put dragged to false as well\r\n      retrieveWFSFeatures(componentContext);\r\n      componentContext.setState(\r\n        produce(componentContext.state, draft => {\r\n          draft.dragged = false;\r\n        })\r\n      );\r\n    } else if (\r\n      curr >= minZoom &&\r\n      curr < prev &&\r\n      componentContext.state.dragged\r\n    ) {\r\n      // If dragged, then we need to get new BRP on zoom out\r\n      retrieveWFSFeatures(componentContext);\r\n    }\r\n  };\r\n}\r\n\r\nexport function handleDragEnd(componentContext) {\r\n  return () => {\r\n    const minZoom =\r\n      componentContext.state.wfsServices[\r\n        componentContext.state.selectedWfsService\r\n      ].minZoom;\r\n    const maxZoom =\r\n      componentContext.state.wfsServices[\r\n        componentContext.state.selectedWfsService\r\n      ].maxZoom;\r\n    if (componentContext.state.zoom >= minZoom) {\r\n      retrieveWFSFeatures(componentContext);\r\n      componentContext.setState(\r\n        produce(componentContext.state, draft => {\r\n          draft.dragged = true;\r\n        })\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport function onPointToLayer(feature, latlng) {\r\n  // console.log(feature.properties.value + 200);\r\n  return circleMarker(latlng, {\r\n    radius: 8,\r\n    fillColor: \"#ff7800\",\r\n    color: \"#000\",\r\n    weight: 1,\r\n    opacity: 1,\r\n    fillOpacity: 0.8\r\n  });\r\n}\r\n\r\nexport function createFeatureLayers(componentContext, onFeatureClick) {\r\n  return Object.entries(componentContext.state.wfsServices)\r\n    .filter(([key, value]) => key === componentContext.state.selectedWfsService)\r\n    .map(([key, value]) => (\r\n      <FeatureGroup key={key} onClick={onFeatureClick}>\r\n        {value.features.map(geoJSONData => (\r\n          <GeoJSON\r\n            data={geoJSONData}\r\n            key={geoJSONData.id}\r\n            style={{ color: \"blue\", fillOpacity: 0 }}\r\n            pointToLayer={onPointToLayer}\r\n          />\r\n        ))}\r\n      </FeatureGroup>\r\n    ));\r\n}\r\n\r\nexport function selectWfsService(componentContext) {\r\n  return e => {\r\n    const minZoom = componentContext.state.wfsServices[e.target.value].minZoom;\r\n    const maxZoom = componentContext.state.wfsServices[e.target.value].maxZoom;\r\n    componentContext.setState(\r\n      produce(componentContext.state, draft => {\r\n        draft.wfsServices[\r\n          componentContext.state.selectedWfsService\r\n        ].features = [];\r\n        draft.selectedWfsService = e.target.value;\r\n      })\r\n    );\r\n\r\n    if (componentContext.state.zoom >= minZoom) {\r\n      // Using this so we can use the call back that gets called once react rerendered the component\r\n      componentContext.forceUpdate(() => {\r\n        retrieveWFSFeatures(componentContext);\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nconst shorten = (value, maxLength = 18, first = 8, last = 8) => {\r\n  if (value.toString().length <= maxLength) return value;\r\n\r\n  const pre = value.toString().substr(0, first);\r\n  const app = value.toString().substr(value.length - last, last);\r\n  return `${pre}...${app}`;\r\n};\r\n\r\nexport function wfsServiceDropdown(componentContext) {\r\n  return (\r\n    <select\r\n      className=\"like-leaflet\"\r\n      onChange={selectWfsService(componentContext)}\r\n      value={componentContext.state.selectedWfsService}\r\n    >\r\n      {Object.entries(componentContext.state.wfsServices).map(\r\n        ([key, value]) => (\r\n          <option key={key} value={key}>\r\n            {shorten(value.name)}\r\n          </option>\r\n        )\r\n      )}\r\n    </select>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nlet deferredPrompt;\r\n\r\nwindow.addEventListener(\"beforeinstallprompt\", e => {\r\n  // Stash the event so it can be triggered later.\r\n  console.log(3253);\r\n  deferredPrompt = e;\r\n});\r\n\r\nconst promptInstall = () => {\r\n  if (deferredPrompt) {\r\n    deferredPrompt.prompt();\r\n    deferredPrompt = undefined;\r\n  }\r\n};\r\n\r\nReactDOM.render(\r\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n    <App promptInstall={promptInstall} />\r\n  </BrowserRouter>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.register({\r\n  onUpdate: () => {},\r\n  onSuccess: () => {}\r\n});\r\n","import React from \"react\";\r\nimport Plot from \"react-plotly.js\";\r\n\r\nexport class Graph extends React.Component {\r\n  render() {\r\n    return (\r\n      <Plot\r\n        config={{\r\n          responsive: true,\r\n          modeBarButtons: [\r\n            []\r\n            // [\"zoom2d\", \"pan2d\"],\r\n            // [\"zoomIn2d\", \"zoomOut2d\", \"autoScale2d\"]\r\n          ],\r\n          displaylogo: false\r\n        }}\r\n        data={[\r\n          {\r\n            x: [\r\n              \"Januari\",\r\n              \"Februari\",\r\n              \"Maart\",\r\n              \"April\",\r\n              \"Mei\",\r\n              \"Juni\",\r\n              \"Juli\",\r\n              \"Augustus\",\r\n              \"September\",\r\n              \"Oktober\",\r\n              \"November\",\r\n              \"December\"\r\n            ],\r\n            y: [\r\n              \"0.005\",\r\n              \"0.03\",\r\n              \"0.09\",\r\n              \"0.426\",\r\n              \"0.82\",\r\n              \"1.69\",\r\n              \"1.67\",\r\n              \"1.462\",\r\n              \"0.90\",\r\n              \"0.24\",\r\n              \"0.043\",\r\n              \"0.008\"\r\n            ],\r\n            name: \"Pollen\",\r\n            type: \"bar\"\r\n          },\r\n          {\r\n            x: [\r\n              \"Januari\",\r\n              \"Februari\",\r\n              \"Maart\",\r\n              \"April\",\r\n              \"Mei\",\r\n              \"Juni\",\r\n              \"Juli\",\r\n              \"Augustus\",\r\n              \"September\",\r\n              \"Oktober\",\r\n              \"November\",\r\n              \"December\"\r\n            ],\r\n            y: [\r\n              \"0.005\",\r\n              \"0.015\",\r\n              \"0.07\",\r\n              \"0.423\",\r\n              \"0.81\",\r\n              \"1.18\",\r\n              \"1.19\",\r\n              \"1.057\",\r\n              \"0.894\",\r\n              \"0.23\",\r\n              \"0.042\",\r\n              \"0.008\"\r\n            ],\r\n            name: \"Nectar\",\r\n            type: \"bar\"\r\n          }\r\n        ]}\r\n        layout={{\r\n          margin: { l: 50, t: 5, r: 40, b: 75 },\r\n          legend: {\r\n            x: 0,\r\n            y: 1\r\n          },\r\n          autosize: true\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n","export const activities = {\r\n  MEST: \"Mest uitrijden\",\r\n  PLOW: \"Ploegen\",\r\n  SEEDBED: \"Zaaibedbereiding\",\r\n  SEED: \"Zaaien\",\r\n  PLANT: \"Planten/Poten\",\r\n  PROTECTION: \"Gewasbescherming\",\r\n  FERTILIZER: \"Kunstmest strooien\",\r\n  HARVEST: \"Rooien / Oogsten\"\r\n};\r\n\r\nconst CROPS = {\r\n  POTATO: \"Aardappel\",\r\n  BROCCOLI: \"Broccoli\",\r\n  SUGARBEET: \"Suikerbiet\",\r\n  MAIZE: \"Snijmais\",\r\n  WHEAT: \"Tarwe\"\r\n};\r\n\r\nexport const materialLists = {\r\n  MEST: {\r\n    CATTLE: \"Rundveedrijfmest\",\r\n    POULTRY: \"Slachtkuikenmest\",\r\n    COMPOST: \"Compost\"\r\n  },\r\n  SEEDBED: CROPS,\r\n  SEED: {\r\n    BG11: \"BG11 Superplus\",\r\n    HORSEMASTER: \"Horsemaster\",\r\n    FANATIC: \"Fanatic\",\r\n    EDONIA: \"Edonia\",\r\n    KUMA: \"Kuma\"\r\n  },\r\n  PLANT: {\r\n    BINTJE: \"Bintje\",\r\n    SPUNTA: \"Spunta\",\r\n    RADAR: \"Radar\",\r\n    REDSUN: \"Red sun\"\r\n  },\r\n  PROTECTION: {\r\n    NEMATHORIN: \"Nemathorin 10G\",\r\n    MANKAR: \"MANKAR\",\r\n    MEGA: \"Mega 2,4-D\",\r\n    THIACLOPRID: \"Thiacloprid\"\r\n  },\r\n  FERTILIZER: {\r\n    2018: \"10/12/2018\",\r\n    KAS: \"KAS\",\r\n    SUPERFOSFAAT: \"Superfosfaat\"\r\n  },\r\n  HARVEST: CROPS\r\n};\r\n\r\nexport const employees = {\r\n  1: \"J. Jansen\",\r\n  2: \"T. Veenstra\"\r\n};\r\n","import React, { createRef, useEffect } from \"react\";\r\nimport {\r\n  Map,\r\n  TileLayer,\r\n  WMSTileLayer,\r\n  LayersControl,\r\n  LayerGroup,\r\n  ZoomControl,\r\n  AttributionControl,\r\n  FeatureGroup,\r\n  GeoJSON\r\n} from \"react-leaflet\";\r\n\r\nimport \"./viewer.css\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport {} from \"leaflet\";\r\n\r\nconst { BaseLayer, Overlay } = LayersControl;\r\n\r\nexport const PlotViewer = ({ plot, mapStyle }) => {\r\n  const mapRef = createRef();\r\n\r\n  useEffect(() => {\r\n    if (plot) {\r\n      console.log(plot);\r\n    }\r\n    if (plot) {\r\n      mapRef.current.leafletElement.fitBounds(plot.bounds, { padding: [5, 5] });\r\n    }\r\n  }, [plot]);\r\n\r\n  return (\r\n    <Map\r\n      ref={mapRef}\r\n      style={mapStyle}\r\n      className=\"plot-viewer\"\r\n      zoom={10}\r\n      center={[51.84276079, 5.18380148]}\r\n      scrollWheelZoom={false}\r\n      doubleClickZoom={false}\r\n      closePopupOnClick={false}\r\n      dragging={false}\r\n      zoomSnap={false}\r\n      zoomDelta={false}\r\n      trackResize={false}\r\n      touchZoom={false}\r\n      zoomControl={false}\r\n      layersControl={false}\r\n      attributionControl={false}\r\n    >\r\n      {/* <BaseLayer checked name=\"OpenStreetMap\">\r\n          <TileLayer\r\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n        </BaseLayer> */}\r\n      <WMSTileLayer\r\n        url=\"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wms?\"\r\n        layers=\"Actueel_ortho25\"\r\n      />\r\n      {plot ? (\r\n        <FeatureGroup>\r\n          <GeoJSON\r\n            data={plot.feature}\r\n            style={{ color: \"#0088ff\", fillOpacity: 0 }}\r\n          />\r\n        </FeatureGroup>\r\n      ) : null}\r\n    </Map>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport produce from \"immer\";\r\n\r\nconst ContextStore = React.createContext();\r\n\r\nconst initialState = {\r\n  jobs: [\r\n    {\r\n      name: \"Perceel Cuneraweg\",\r\n      employee: \"1\",\r\n      date: \"2020-02-12T14:50:34.042Z\",\r\n      customer: \"Pieter Veenstra\",\r\n      customerNumber: \"63535684\",\r\n      adres: \"Cuneraweg 223\",\r\n      jobNumber: \"486655\",\r\n      activity: \"MEST\",\r\n      remark: \"Niet vergeten\",\r\n      material: \"CATTLE\",\r\n      plot: {\r\n        feature: {\r\n          type: \"Feature\",\r\n          id: \"brpgewaspercelen.505324\",\r\n          geometry: {\r\n            type: \"Polygon\",\r\n            coordinates: [\r\n              [\r\n                [5.17301722, 51.80695598],\r\n                [5.17294758, 51.80695594],\r\n                [5.17290809, 51.806963],\r\n                [5.17289532, 51.80698422],\r\n                [5.17233155, 51.80885617],\r\n                [5.17232233, 51.80895231],\r\n                [5.17305187, 51.80902743],\r\n                [5.17311883, 51.8088779],\r\n                [5.17341821, 51.80891187],\r\n                [5.17343464, 51.80891089],\r\n                [5.17345608, 51.8088987],\r\n                [5.17346767, 51.80887834],\r\n                [5.17350867, 51.80880134],\r\n                [5.1735276, 51.80873929],\r\n                [5.17356935, 51.80860447],\r\n                [5.17358464, 51.80855266],\r\n                [5.17358727, 51.8085438],\r\n                [5.17368566, 51.8082214],\r\n                [5.17401402, 51.80714541],\r\n                [5.17393765, 51.80713827],\r\n                [5.17393105, 51.80716038],\r\n                [5.17369334, 51.8071326],\r\n                [5.1736741, 51.80714206],\r\n                [5.1735936, 51.80712885],\r\n                [5.17354921, 51.80701424],\r\n                [5.17301722, 51.80695598]\r\n              ]\r\n            ]\r\n          },\r\n          geometry_name: \"geom\",\r\n          properties: {\r\n            objectid: 2031471,\r\n            gewascategorie: \"Grasland\",\r\n            gewas: \"Grasland, blijvend\",\r\n            gewascode: \"265\",\r\n            length: 606.3757669557,\r\n            area: 17068.041591873\r\n          }\r\n        },\r\n        bounds: [\r\n          [51.80695594, 5.17232233],\r\n          [51.80902743, 5.17401402]\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      name: \"Perceel 23\",\r\n      employee: \"1\",\r\n      date: \"2020-02-12T16:55:23.154Z\",\r\n      customer: \"Simon de Boer\",\r\n      customerNumber: \"436436436\",\r\n      adres: \"Cuneraweg 243\",\r\n      jobNumber: \"335113135\",\r\n      activity: \"FERTILIZER\",\r\n      remark: \"Let op\",\r\n      material: \"SUPERFOSFAAT\",\r\n      plot: {\r\n        feature: {\r\n          type: \"Feature\",\r\n          id: \"brpgewaspercelen.219328\",\r\n          geometry: {\r\n            type: \"Polygon\",\r\n            coordinates: [\r\n              [\r\n                [5.18151103, 51.83514861],\r\n                [5.18132742, 51.83515038],\r\n                [5.18132649, 51.8351583],\r\n                [5.18132436, 51.83517633],\r\n                [5.17930989, 51.83521436],\r\n                [5.17931437, 51.8351962],\r\n                [5.17931856, 51.8351792],\r\n                [5.17917512, 51.83517895],\r\n                [5.17915976, 51.83517619],\r\n                [5.17913092, 51.83516495],\r\n                [5.17913384, 51.83520253],\r\n                [5.17913523, 51.83522048],\r\n                [5.17662127, 51.83530855],\r\n                [5.17493777, 51.83537245],\r\n                [5.1751007, 51.83786625],\r\n                [5.17789407, 51.83775711],\r\n                [5.17785633, 51.8359639],\r\n                [5.17789648, 51.83596052],\r\n                [5.17794783, 51.83775483],\r\n                [5.1791768, 51.83769427],\r\n                [5.17919126, 51.83769356],\r\n                [5.17920573, 51.83769285],\r\n                [5.17990349, 51.83765845],\r\n                [5.18114827, 51.83763095],\r\n                [5.18126178, 51.83713404],\r\n                [5.17920385, 51.83716869],\r\n                [5.17919869, 51.83716712],\r\n                [5.17919204, 51.83715507],\r\n                [5.17921674, 51.83713605],\r\n                [5.18147575, 51.83706347],\r\n                [5.18148293, 51.83704524],\r\n                [5.18150812, 51.83702107],\r\n                [5.18154856, 51.83687641],\r\n                [5.18154908, 51.8351972],\r\n                [5.18153081, 51.83517695],\r\n                [5.18150619, 51.83517563],\r\n                [5.18150939, 51.83515776],\r\n                [5.18151103, 51.83514861]\r\n              ]\r\n            ]\r\n          },\r\n          geometry_name: \"geom\",\r\n          properties: {\r\n            objectid: 1745475,\r\n            gewascategorie: \"Grasland\",\r\n            gewas: \"Grasland, blijvend\",\r\n            gewascode: \"265\",\r\n            length: 2135.2585601193,\r\n            area: 121375.373582228\r\n          }\r\n        },\r\n        bounds: [\r\n          [51.83514861, 5.17493777],\r\n          [51.83786625, 5.18154908]\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n  return produce(state, draft => {\r\n    switch (action.type) {\r\n      case \"reset\":\r\n        return initialState;\r\n      case \"addJob\":\r\n        draft.jobs.push(action.job);\r\n        break;\r\n      default:\r\n        draft[action.group] = action.data;\r\n        // eslint-disable-next-line no-console\r\n        console.log(\"No dedicated dispatcher, using default\", action.type);\r\n        break;\r\n    }\r\n  });\r\n};\r\n\r\nconst ContextStoreProvider = ({ children }) => {\r\n  const [state, dispatch] = React.useReducer(reducer, initialState);\r\n  const value = { state, dispatch };\r\n\r\n  return (\r\n    <ContextStore.Provider value={value}>{children}</ContextStore.Provider>\r\n  );\r\n};\r\n\r\nconst ContextStoreConsumer = ContextStore.Consumer;\r\n\r\nexport { ContextStore, ContextStoreProvider, ContextStoreConsumer };\r\n","import React, { useState, createRef, useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  Modal,\r\n  Form,\r\n  Input,\r\n  Radio,\r\n  Drawer,\r\n  Select,\r\n  DatePicker\r\n} from \"antd\";\r\nimport { activities, materialLists, employees } from \"../enums\";\r\nimport { PlotViewer } from \"../plot-viewer/plot-viewer\";\r\nimport moment from \"moment\";\r\nimport { ContextStore } from \"../utils/store\";\r\nconst { Option } = Select;\r\n\r\nexport const CreatePlotForm = ({\r\n  selectedPlot,\r\n  visible,\r\n  onCancel,\r\n  onCreate\r\n}) => {\r\n  const [activity, setActivity] = useState();\r\n  const [material, setMaterial] = useState();\r\n  const { state, dispatch } = useContext(ContextStore);\r\n  const formRef = createRef();\r\n\r\n  console.log(selectedPlot);\r\n\r\n  const selectActivity = activity => {\r\n    setActivity(activity);\r\n    setMaterial(null);\r\n  };\r\n\r\n  const onFinish = result => {\r\n    const job = {\r\n      ...result,\r\n      date: result.date.toDate().toISOString(),\r\n      plot: selectedPlot\r\n    };\r\n    console.log(job);\r\n    onCreate(job);\r\n    dispatch({ type: \"addJob\", job: job });\r\n    // formRef.current.resetFields();\r\n  };\r\n\r\n  const onClose = () => {\r\n    onCancel();\r\n    formRef.current.resetFields();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Drawer\r\n        visible={visible}\r\n        title=\"Opdracht aanmaken\"\r\n        placement=\"bottom\"\r\n        onClose={onClose}\r\n        height={\"100%\"}\r\n      >\r\n        <PlotViewer\r\n          mapStyle={{\r\n            height: \"150px\",\r\n            marginBottom: \"24px\",\r\n            borderRadius: \"5px\"\r\n          }}\r\n          plot={selectedPlot}\r\n        ></PlotViewer>\r\n        <Form\r\n          layout=\"vertical\"\r\n          onFinish={onFinish}\r\n          initialValues={{\r\n            employee: Object.keys(employees)[0],\r\n            date: moment()\r\n          }}\r\n          ref={formRef}\r\n        >\r\n          <Form.Item\r\n            name=\"name\"\r\n            label=\"Naam perceel\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Naam van het perceel is vereist!\"\r\n              }\r\n            ]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"employee\"\r\n            label=\"Medewerker\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Medewerker is vereist!\"\r\n              }\r\n            ]}\r\n          >\r\n            <Select>\r\n              {Object.keys(employees).map(key => (\r\n                <Option value={key}>{employees[key]}</Option>\r\n              ))}\r\n            </Select>\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"date\" label=\"Datum\">\r\n            <DatePicker format={\"DD-MM-YYYY\"} style={{ width: \"100%\" }} />\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"customer\" label=\"Klantnaam\">\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"customerNumber\" label=\"Klantnummer\">\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"adres\" label=\"Adres\">\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item name=\"jobNumber\" label=\"Opdrachtnummer\">\r\n            <Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"activity\" label=\"Activiteit\">\r\n            <Select onChange={selectActivity}>\r\n              {Object.keys(activities).map(key => (\r\n                <Option value={key}>{activities[key]}</Option>\r\n              ))}\r\n            </Select>\r\n          </Form.Item>\r\n          {activity ? (\r\n            materialLists[activity] ? (\r\n              <Form.Item name=\"material\" label=\"Materiaal / Gewas\">\r\n                <Select value={material} onChange={setMaterial}>\r\n                  {Object.keys(materialLists[activity]).map(key => (\r\n                    <Option value={key}>{materialLists[activity][key]}</Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            ) : null\r\n          ) : null}\r\n          <Form.Item name=\"remark\" label=\"Opmerking\">\r\n            <Input type=\"textarea\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            style={{\r\n              textAlign: \"right\",\r\n              right: 0,\r\n              bottom: 0,\r\n              width: \"100%\",\r\n              borderTop: \"1px solid #e9e9e9\",\r\n              padding: \"10px 16px\",\r\n              background: \"#fff\",\r\n              marginBottom: 0\r\n            }}\r\n          >\r\n            <Button onClick={onClose} style={{ marginRight: 24 }}>\r\n              Annuleren\r\n            </Button>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Aanmaken\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Drawer>\r\n    </>\r\n  );\r\n};\r\n","import React, { PureComponent, createRef } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"./viewer.css\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport {\r\n  Map,\r\n  TileLayer,\r\n  WMSTileLayer,\r\n  LayersControl,\r\n  LayerGroup,\r\n  ZoomControl,\r\n  AttributionControl\r\n} from \"react-leaflet\";\r\nimport produce from \"immer\";\r\nimport {\r\n  createFeatureLayers,\r\n  handleZoomEnd,\r\n  handleDragEnd,\r\n  initialState,\r\n  registerWFS,\r\n  createWfs,\r\n  wfsServiceDropdown\r\n} from \"../utils/wfs-helper\";\r\n\r\nimport logo from \"../images/logo-wopa.jpg\";\r\nimport locate from \"../images/locate.svg\";\r\nimport camera from \"../images/camera.svg\";\r\nimport download from \"../images/download.svg\";\r\nimport { Graph } from \"../graph/graph\";\r\nimport L from \"leaflet\";\r\n\r\nimport \"@geoman-io/leaflet-geoman-free\";\r\nimport \"@geoman-io/leaflet-geoman-free/dist/leaflet-geoman.css\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faSave, faTimes, faCheck } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { Modal } from \"antd\";\r\nimport { CreatePlotForm } from \"../create-plot-form\";\r\n\r\nconst { BaseLayer, Overlay } = LayersControl;\r\n\r\nclass Viewer extends PureComponent {\r\n  mapRef = createRef();\r\n\r\n  selectedLayer;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = produce(initialState(), draft => {\r\n      draft.lat = 51.84276079;\r\n      draft.lon = 5.18380148;\r\n      draft.selectedFeature = null;\r\n      draft.selectedLayer = null;\r\n      draft.selectedPlot = null;\r\n      draft.showModal = false;\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    registerWFS(\r\n      this,\r\n      createWfs(\r\n        \"BRP Gewaspercelen\",\r\n        \"https://geodata.nationaalgeoregister.nl\",\r\n        \"brpgewaspercelen\",\r\n        \"brpgewaspercelen:brpgewaspercelen\",\r\n        14,\r\n        undefined\r\n      ),\r\n      createWfs(\r\n        \"Basis registratie Kadaster\",\r\n        \"https://geodata.nationaalgeoregister.nl\",\r\n        \"kadastralekaartv3\",\r\n        \"kadastralekaartv3:perceel\",\r\n        14,\r\n        undefined\r\n      ),\r\n      createWfs(\r\n        \"Agrarisch Areaal Nederland (AAN)\",\r\n        \"https://geodata.nationaalgeoregister.nl\",\r\n        \"aan\",\r\n        \"aan:aan\",\r\n        14,\r\n        undefined\r\n      )\r\n    );\r\n\r\n    let map = this.mapRef.current.leafletElement;\r\n\r\n    map.pm.addControls({\r\n      position: \"bottomleft\",\r\n      drawCircle: false,\r\n      editMode: false,\r\n      dragMode: false,\r\n      drawPolyline: false,\r\n      drawCircleMarker: false,\r\n      drawMarker: false\r\n    });\r\n\r\n    // window.addEventListener(\"resize\", () => {\r\n    //   const mapRef = this.mapRef;\r\n    //   debugger;\r\n    //   this.mapRef.current.height(window.innerHeight);\r\n    //   this.mapRef.current.invalidateSize();\r\n    // });\r\n  }\r\n\r\n  handleFeatureClick = e => {\r\n    if (this.state.selectedLayer) {\r\n      this.state.selectedLayer.pm.disable();\r\n      this.mapRef.current.leafletElement.removeLayer(this.state.selectedLayer);\r\n    }\r\n\r\n    if (this.selectedLayer) {\r\n      this.selectedLayer.setStyle({\r\n        color: \"blue\",\r\n        fillOpacity: 0\r\n      });\r\n    }\r\n    this.selectedLayer = e.layer;\r\n    this.selectedLayer.setStyle({\r\n      color: \"red\",\r\n      fillOpacity: 0.2\r\n    });\r\n\r\n    this.selectedLayer.bringToFront();\r\n\r\n    console.log(e.layer.feature);\r\n\r\n    const bounds = this.selectedLayer.getBounds();\r\n    this.setState(\r\n      produce(this.state, draft => {\r\n        draft.selectedFeature = {\r\n          feature: this.selectedLayer.feature,\r\n          bounds: [\r\n            [bounds.getSouthWest().lat, bounds.getSouthWest().lng],\r\n            [bounds.getNorthEast().lat, bounds.getNorthEast().lng]\r\n          ]\r\n        };\r\n        draft.selectedPlot = null;\r\n        draft.selectedLayer = null;\r\n      })\r\n    );\r\n  };\r\n\r\n  selectPlot = () => {\r\n    this.mapRef.current.leafletElement.fitBounds(\r\n      this.state.selectedFeature.bounds\r\n    );\r\n\r\n    console.log(this.state.selectedFeature);\r\n\r\n    this.selectedLayer.setStyle({\r\n      color: \"blue\",\r\n      fillOpacity: 0\r\n    });\r\n\r\n    const layer = new L.GeoJSON(this.state.selectedFeature.feature, {\r\n      style: { color: \"red\", fillOpacity: 0 }\r\n    }).addTo(this.mapRef.current.leafletElement);\r\n    layer.setZIndex(99999);\r\n    layer.pm.enable({ allowSelfIntersection: false });\r\n\r\n    this.setState(\r\n      produce(this.state, draft => {\r\n        draft.selectedLayer = layer;\r\n      })\r\n    );\r\n  };\r\n\r\n  savePlot = () => {\r\n    this.state.selectedLayer.pm.disable();\r\n    const bounds = this.state.selectedLayer.getBounds();\r\n    console.log(this.state.selectedLayer);\r\n    this.setState(\r\n      produce(this.state, draft => {\r\n        draft.selectedPlot = {\r\n          feature: this.state.selectedLayer.toGeoJSON(),\r\n          bounds: [\r\n            [bounds.getSouthWest().lat, bounds.getSouthWest().lng],\r\n            [bounds.getNorthEast().lat, bounds.getNorthEast().lng]\r\n          ]\r\n        };\r\n        draft.showModal = true;\r\n      })\r\n    );\r\n  };\r\n\r\n  cancelPlot = () => {\r\n    this.state.selectedLayer.pm.disable();\r\n    this.setState(\r\n      produce(this.state, draft => {\r\n        draft.selectedPlot = null;\r\n        draft.selectedFeature = null;\r\n        draft.selectedLayer = null;\r\n      })\r\n    );\r\n    this.mapRef.current.leafletElement.stopLocate();\r\n  };\r\n\r\n  locateUser = () => {\r\n    this.mapRef.current.leafletElement.locate({\r\n      setView: true,\r\n      watch: false,\r\n      maxZoom: 17,\r\n      enableHighAccuracy: true\r\n    });\r\n  };\r\n\r\n  handleLocationFound = e => {\r\n    const map = this.mapRef.current.leafletElement;\r\n    var radius = e.accuracy / 2;\r\n    L.marker(e.latlng)\r\n      .addTo(map)\r\n      .bindPopup(\"You are within \" + radius + \" meters from this point\")\r\n      .openPopup();\r\n    L.circle(e.latlng, 1).addTo(map);\r\n  };\r\n\r\n  async takePicture() {}\r\n\r\n  createJob = job => {\r\n    this.props.history.push(\"/\");\r\n\r\n    this.setState(\r\n      produce(this.state, draft => {\r\n        draft.showModal = false;\r\n      })\r\n    );\r\n  };\r\n\r\n  handleCancel = () => {\r\n    this.setState(\r\n      produce(this.state, draft => {\r\n        draft.showModal = false;\r\n      })\r\n    );\r\n  };\r\n\r\n  zoomEnd = () => {\r\n    return e => {\r\n      if (this.state.selectedLayer) {\r\n        this.state.selectedLayer.bringToFront();\r\n      }\r\n      handleZoomEnd(this)(e);\r\n    };\r\n  };\r\n\r\n  dragEnd = () => {\r\n    return e => {\r\n      if (this.state.selectedLayer) {\r\n        this.state.selectedLayer.bringToFront();\r\n      }\r\n      handleDragEnd(this)(e);\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const position = [this.state.lat, this.state.lon];\r\n    return (\r\n      <>\r\n        <div className=\"map\">\r\n          <Link to=\"/\">\r\n            <div className=\"like-leaflet logo\">\r\n              <img src={logo} alt=\"logo\" />\r\n\r\n              {/* <header>BEESPOT</header> */}\r\n            </div>\r\n          </Link>\r\n          <div className=\"wfs-dropdown\">{wfsServiceDropdown(this)}</div>\r\n          <div className=\"like-leaflet locate\" onClick={this.locateUser}>\r\n            <img src={locate} alt=\"locate\" />\r\n          </div>\r\n          {/* <div\r\n            className=\"like-leaflet install\"\r\n            onClick={this.props.promptInstall}\r\n          >\r\n            <img src={download} alt=\"install\" />\r\n          </div> */}\r\n          {/* <Link to=\"/pic\">\r\n            <div className=\"like-leaflet camera-button\">\r\n              <img src={camera} alt=\"camera\" />\r\n            </div>\r\n          </Link> */}\r\n\r\n          {/* <div className=\"buttons\">\r\n            <div className=\"\">\r\n              <a>chart</a>\r\n              <a>detail</a>\r\n            </div>\r\n          </div> */}\r\n          {this.state.selectedFeature ? (\r\n            !this.state.selectedLayer ? (\r\n              <div className=\"buttons\">\r\n                <div\r\n                  onClick={this.selectPlot}\r\n                  className=\"like-leaflet select-plot\"\r\n                >\r\n                  Selecteer perceel\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"buttons\">\r\n                <div\r\n                  onClick={this.cancelPlot}\r\n                  className=\"like-leaflet save-button\"\r\n                >\r\n                  <FontAwesomeIcon icon={faTimes} />\r\n                </div>\r\n                <div\r\n                  onClick={this.savePlot}\r\n                  className=\"like-leaflet save-button\"\r\n                >\r\n                  <FontAwesomeIcon icon={faCheck} />\r\n                </div>\r\n              </div>\r\n            )\r\n          ) : null}\r\n\r\n          <Map\r\n            center={position}\r\n            zoom={this.state.zoom}\r\n            onZoomEnd={this.zoomEnd()}\r\n            onDragEnd={this.dragEnd()}\r\n            onClick={this.handleClick}\r\n            onLocationfound={this.handleLocationFound}\r\n            ref={this.mapRef}\r\n            className=\"leaflet-map\"\r\n            zoomControl={false}\r\n            attributionControl={false}\r\n          >\r\n            <AttributionControl position=\"topright\" />\r\n            <ZoomControl position=\"bottomright\" />\r\n            <LayersControl position=\"topright\">\r\n              {/* <BaseLayer name=\"Test\">\r\n                  <TileLayer\r\n                    attribution=\"&amp;copy PDOK\"\r\n                    url=\"https://geodata.nationaalgeoregister.nl/luchtfoto/infrarood/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=Actueel_ortho25IR&STYLE=default&TILEMATRIXSET=EPSG:3857&TILEMATRIX={z}&TILEROW={x}&TILECOL={y}&FORMAT=image%2Fpng\"\r\n                  />\r\n                </BaseLayer> */}\r\n              <BaseLayer checked name=\"Luchtfoto\">\r\n                <LayerGroup>\r\n                  <WMSTileLayer\r\n                    url=\"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wms?\"\r\n                    layers=\"Actueel_ortho25\"\r\n                  />\r\n                  {/* <TileLayer\r\n                      url=\"https://geodata.nationaalgeoregister.nl/tiles/service/tms/1.0.0/lufolabels/EPSG:28992/{z}/{x}/{y}.png\"\r\n                      tms={true}\r\n                    /> */}\r\n                </LayerGroup>\r\n              </BaseLayer>\r\n              <BaseLayer name=\"OpenStreetMap\">\r\n                <TileLayer\r\n                  attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                  url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                />\r\n              </BaseLayer>\r\n              <BaseLayer name=\"Luchtfoto Infrarood\">\r\n                <WMSTileLayer\r\n                  url=\"https://geodata.nationaalgeoregister.nl/luchtfoto/infrarood/wms?\"\r\n                  layers=\"Actueel_ortho25IR\"\r\n                />\r\n              </BaseLayer>\r\n              <Overlay name=\"BRP Gewaspercelen (WMS)\">\r\n                <WMSTileLayer\r\n                  url=\"https://geodata.nationaalgeoregister.nl/brpgewaspercelen/wms?\"\r\n                  layers=\"brpgewaspercelen:brpgewaspercelen\"\r\n                  transparent={true}\r\n                  format=\"image/png\"\r\n                  opacity={0.8}\r\n                />\r\n              </Overlay>\r\n              {/* <Overlay name=\"gemiddelde toegevoegde waarde per hectare weer van voedselteelten in de akkerbouw (2011-2014)\">\r\n                <WMSTileLayer\r\n                  url=\"http://geodata.rivm.nl/geoserver/wms?\"\r\n                  layers=\"dank:lei_l1a_gc_akkerbvoed\"\r\n                  transparent={true}\r\n                  format=\"image/png\"\r\n                  opacity={0.8}\r\n                />\r\n              </Overlay> */}\r\n              <Overlay checked name=\"Agrarisch Areaal Nederland (AAN)\">\r\n                <WMSTileLayer\r\n                  url=\"https://geodata.nationaalgeoregister.nl/aan/wms?\"\r\n                  layers=\"aan\"\r\n                  transparent={true}\r\n                  format=\"image/png\"\r\n                  opacity={0.8}\r\n                />\r\n              </Overlay>\r\n              {/* <Overlay name=\"Actueel Hoogtebestand Nederland 3\">\r\n                <WMSTileLayer\r\n                  url=\"https://geodata.nationaalgeoregister.nl/ahn3/wms\"\r\n                  layers=\"ahn3_05m_dsm\"\r\n                  transparent={true}\r\n                  format=\"image/png\"\r\n                  opacity={0.8}\r\n                />\r\n              </Overlay> */}\r\n              {/* <Overlay name=\"Bestand bodemgebruik\">\r\n                <WMSTileLayer\r\n                  url=\"https://geodata.nationaalgeoregister.nl/bestandbodemgebruik2015/wms\"\r\n                  layers=\"bbg2015\"\r\n                  transparent={true}\r\n                  format=\"image/png\"\r\n                  opacity={0.8}\r\n                />\r\n              </Overlay> */}\r\n              {/* <Overlay checked name=\"geoJson\">\r\n                <GeoJSON data={this.geoJson} />\r\n              </Overlay> */}\r\n            </LayersControl>\r\n            {createFeatureLayers(this, this.handleFeatureClick)}\r\n          </Map>\r\n        </div>\r\n        {/* <div className=\"charts\">\r\n          <Graph />\r\n        </div> */}\r\n        <CreatePlotForm\r\n          selectedPlot={this.state.selectedPlot}\r\n          visible={this.state.showModal}\r\n          onCreate={this.createJob}\r\n          onCancel={this.handleCancel}\r\n        ></CreatePlotForm>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Viewer;\r\n","import React, { PureComponent, createRef } from \"react\";\r\nimport \"ol/ol.css\";\r\nimport \"./open-layers.css\";\r\nimport { Map, View } from \"ol\";\r\nimport TileLayer from \"ol/layer/Tile\";\r\nimport VectorLayer from \"ol/layer/Vector\";\r\nimport OSM from \"ol/source/OSM\";\r\nimport GeoJSON from \"ol/format/GeoJSON.js\";\r\nimport VectorSource from \"ol/source/Vector.js\";\r\nimport { bbox as bboxStrategy } from \"ol/loadingstrategy.js\";\r\nimport { Fill, Stroke, Style } from \"ol/style.js\";\r\n\r\nimport Natuur from \"../Natuur\";\r\nimport Bestemmingsplan from \"../Bestemmingsplan\";\r\nimport produce from \"immer\";\r\n\r\nimport bij from \"../images/bij.png\";\r\nimport tent from \"../images/tent.png\";\r\nimport tree from \"../images/tree.png\";\r\nimport windmill from \"../images/windmill.png\";\r\n\r\nexport class OpenLayers extends PureComponent {\r\n  map;\r\n  currentLayer;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = produce({}, draft => {\r\n      draft.radio = \"\";\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.map = new Map({\r\n      target: \"map\",\r\n      layers: [\r\n        new TileLayer({\r\n          source: new OSM()\r\n        })\r\n      ],\r\n      view: new View({\r\n        center: [638956.992885993327945, 6826972.975618642754853], // Ongeveer midden Nederland\r\n        zoom: 12\r\n      })\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.radio !== this.state.radio) {\r\n      if (this.currentLayer) {\r\n        this.map.removeLayer(this.currentLayer);\r\n        this.currentLayer = undefined;\r\n      }\r\n\r\n      if (this.state.radio === \"windmolen\") {\r\n        const vectorSource = new VectorSource({\r\n          features: new GeoJSON().readFeatures(Bestemmingsplan)\r\n        });\r\n        this.currentLayer = new VectorLayer({\r\n          source: vectorSource,\r\n          style: new Style({\r\n            fill: new Fill({\r\n              color: \"rgba(0, 0, 255, 0.4)\"\r\n            }),\r\n            stroke: new Stroke({\r\n              color: \"rgba(0, 0, 255, 1.0)\",\r\n              width: 2\r\n            })\r\n          })\r\n        });\r\n\r\n        this.map.addLayer(this.currentLayer);\r\n      }\r\n\r\n      if (this.state.radio === \"voedselbos\") {\r\n        const vectorSource2 = new VectorSource({\r\n          features: new GeoJSON().readFeatures(Natuur)\r\n        });\r\n        this.currentLayer = new VectorLayer({\r\n          source: vectorSource2,\r\n          style: new Style({\r\n            fill: new Fill({\r\n              color: \"rgba(0, 255, 0, 0.4)\"\r\n            }),\r\n            stroke: new Stroke({\r\n              color: \"rgba(0, 255, 0, 1.0)\",\r\n              width: 2\r\n            })\r\n          })\r\n        });\r\n\r\n        this.map.addLayer(this.currentLayer);\r\n      }\r\n\r\n      if (this.state.radio === \"bijenkast\") {\r\n      }\r\n\r\n      if (this.state.radio === \"camping\") {\r\n      }\r\n    }\r\n  }\r\n\r\n  onRadioChange = e => {\r\n    this.setState(\r\n      produce(this.state, draft => {\r\n        draft.radio = e.currentTarget.value;\r\n      })\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"side\">\r\n          <div className=\"radios\">\r\n            <p>Kansen:</p>\r\n            <div className=\"radio-button\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"windmolen\"\r\n                name=\"kansen\"\r\n                value=\"windmolen\"\r\n                checked={this.state.radio === \"windmolen\"}\r\n                onChange={this.onRadioChange}\r\n              />\r\n              <label htmlFor=\"windmolen\">\r\n                Windmolen{\" \"}\r\n                <img src={windmill} alt=\"Windmolen\" className=\"icon\" />\r\n              </label>\r\n            </div>\r\n            <div className=\"radio-button\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"voedselbos\"\r\n                name=\"kansen\"\r\n                value=\"voedselbos\"\r\n                checked={this.state.radio === \"voedselbos\"}\r\n                onChange={this.onRadioChange}\r\n              />\r\n              <label htmlFor=\"voedselbos\">\r\n                Voedselbos <img src={tree} alt=\"Natuur\" className=\"icon\" />\r\n              </label>\r\n            </div>\r\n            <div className=\"radio-button\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"bijenkast\"\r\n                name=\"kansen\"\r\n                value=\"bijenkast\"\r\n                checked={this.state.radio === \"bijenkast\"}\r\n                onChange={this.onRadioChange}\r\n              />\r\n              <label htmlFor=\"bijenkast\">\r\n                Bijenkast <img src={bij} alt=\"Bijenkast\" className=\"icon\" />\r\n              </label>\r\n            </div>\r\n            <div className=\"radio-button\">\r\n              <input\r\n                type=\"radio\"\r\n                id=\"camping\"\r\n                name=\"kansen\"\r\n                value=\"camping\"\r\n                checked={this.state.radio === \"camping\"}\r\n                onChange={this.onRadioChange}\r\n              />\r\n              <label htmlFor=\"camping\">\r\n                Camping <img src={tent} alt=\"Camping\" className=\"icon\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"map\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { PureComponent } from \"react\";\r\nimport adapter from \"webrtc-adapter\";\r\nimport \"./styles.css\";\r\n\r\nexport class Pic extends PureComponent {\r\n  width = 640; // We will scale the photo width to this\r\n  height = 0; // This will be computed based on the input stream\r\n\r\n  streaming = false;\r\n\r\n  video = null;\r\n  canvas = null;\r\n  photo = null;\r\n  startbutton = null;\r\n  startrecording = null;\r\n\r\n  constructor() {\r\n    super();\r\n    // this.video = React.createRef();\r\n    this.canvas = React.createRef();\r\n    this.photo = React.createRef();\r\n    this.startbutton = React.createRef();\r\n    this.startrecording = React.createRef();\r\n\r\n    // Older browsers might not implement mediaDevices at all, so we set an empty object first\r\n    if (navigator.mediaDevices === undefined) {\r\n      navigator.mediaDevices = {};\r\n    }\r\n\r\n    // Some browsers partially implement mediaDevices. We can't just assign an object\r\n    // with getUserMedia as it would overwrite existing properties.\r\n    // Here, we will just add the getUserMedia property if it's missing.\r\n    if (navigator.mediaDevices.getUserMedia === undefined) {\r\n      navigator.mediaDevices.getUserMedia = function(constraints) {\r\n        // First get ahold of the legacy getUserMedia, if present\r\n        var getUserMedia =\r\n          navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n\r\n        // Some browsers just don't implement it - return a rejected promise with an error\r\n        // to keep a consistent interface\r\n        if (!getUserMedia) {\r\n          return Promise.reject(\r\n            new Error(\"getUserMedia is not implemented in this browser\")\r\n          );\r\n        }\r\n\r\n        // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\r\n        return new Promise(function(resolve, reject) {\r\n          getUserMedia.call(navigator, constraints, resolve, reject);\r\n        });\r\n      };\r\n    }\r\n  }\r\n\r\n  paintVideo = () => {\r\n    if (this.canvas.current) {\r\n      this.canvas.current\r\n        .getContext(\"2d\")\r\n        .drawImage(\r\n          this.video.current,\r\n          0,\r\n          0,\r\n          this.canvas.current.width,\r\n          this.canvas.current.height\r\n        );\r\n      if (!this.video.current.paused) requestAnimationFrame(this.paintVideo);\r\n    }\r\n  };\r\n\r\n  useCamera = () => {\r\n    const video = this.video.current;\r\n    video.muted = true;\r\n    video.setAttribute(\"playsinline\", true); // required to tell iOS safari we don't want fullscreen\r\n    video.play();\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.video = { current: document.createElement(\"video\") };\r\n    const video = this.video.current;\r\n    video.muted = true;\r\n    video.playsinline = true;\r\n    video[\"webkit-playsinline\"] = true;\r\n    video.addEventListener(\"playing\", this.paintVideo);\r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: { facingMode: \"environment\" } })\r\n      .then(stream => {\r\n        // Older browsers may not have srcObject\r\n        if (\"srcObject\" in video) {\r\n          video.srcObject = stream;\r\n        } else {\r\n          // Avoid using this in new browsers, as it is going away.\r\n          video.src = window.URL.createObjectURL(stream);\r\n        }\r\n        video.setAttribute(\"playsinline\", true); // required to tell iOS safari we don't want fullscreen\r\n        video.play();\r\n      })\r\n      .catch(err => {\r\n        console.log(\"An error occurred: \" + err);\r\n      });\r\n\r\n    // video.onloadedmetadata = e => {\r\n    //   video.play();\r\n    // };\r\n\r\n    // this.video.current.addEventListener(\r\n    //   \"canplay\",\r\n    //   ev => {\r\n    //     if (!this.streaming) {\r\n    //       this.height =\r\n    //         this.video.current.videoHeight /\r\n    //         (this.video.current.videoWidth / this.width);\r\n\r\n    //       this.video.current.setAttribute(\"width\", this.width);\r\n    //       this.video.current.setAttribute(\"height\", this.height);\r\n    //       this.canvas.current.setAttribute(\"width\", this.width);\r\n    //       this.canvas.current.setAttribute(\"height\", this.height);\r\n    //       this.streaming = true;\r\n    //     }\r\n    //   },\r\n    //   false\r\n    // );\r\n\r\n    this.startbutton.current.addEventListener(\r\n      \"click\",\r\n      ev => {\r\n        this.takepicture();\r\n        ev.preventDefault();\r\n      },\r\n      false\r\n    );\r\n\r\n    // this.startrecording.current.addEventListener(\r\n    //   \"click\",\r\n    //   this.useCamera,\r\n    //   false\r\n    // );\r\n  }\r\n\r\n  takepicture() {\r\n    var data = this.canvas.current.toDataURL(\"image/png\");\r\n    this.photo.current.setAttribute(\"src\", data);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <input type=\"file\" accept=\"image/*\" capture=\"camera\"></input>\r\n        <div className=\"camera\">\r\n          <button onclick=\"this.useCamera()\">Start recording</button>\r\n          {/* <video\r\n            className=\"video either-gif-or-video\"\r\n            ref={this.video}\r\n            muted\r\n            autoplay\r\n            playsinline\r\n            webkit-playsinline\r\n          >\r\n            Video stream not available.\r\n          </video> */}\r\n          <button className=\"startbutton\" ref={this.startbutton}>\r\n            Take photo\r\n          </button>\r\n        </div>\r\n        <canvas className=\"canvas\" ref={this.canvas}></canvas>\r\n        <div className=\"output\">\r\n          <img\r\n            className=\"photo\"\r\n            ref={this.photo}\r\n            alt=\"The screen capture will appear in this box.\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Layout, Menu, Input } from \"antd\";\r\nimport \"./styles.scss\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons\";\r\nimport logo from \"../images/logo-wopa.jpg\";\r\n\r\nconst { Header: AntdHeader } = Layout;\r\nconst { SubMenu } = Menu;\r\n\r\nexport const Header = () => {\r\n  const [current, setCurrent] = useState();\r\n  const { pathname } = useLocation();\r\n\r\n  console.log(\"pathname: \", pathname); // TODO: highlight tab based on pathname\r\n\r\n  const handleClick = e => {\r\n    console.log(\"click \", e);\r\n    setCurrent(e.key);\r\n  };\r\n\r\n  return (\r\n    <AntdHeader\r\n      style={{\r\n        position: \"fixed\",\r\n        zIndex: 9999,\r\n        width: \"100%\",\r\n        paddingLeft: \"2rem\",\r\n        paddingRight: \"2rem\",\r\n        textAlign: \"left\"\r\n      }}\r\n      className=\"vaa-header\"\r\n    >\r\n      <Link to=\"/\" className=\"header-logo\">\r\n        <img src={logo} alt=\"logo\" />\r\n      </Link>\r\n      <h1>Mijn opdrachten</h1>\r\n    </AntdHeader>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Button } from \"antd\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport \"./styles.scss\";\r\n\r\nexport const FloatingButton = () => (\r\n  <Button\r\n    type=\"primary\"\r\n    shape=\"round\"\r\n    className=\"add-button\"\r\n    icon={<FontAwesomeIcon icon={faPlus} />}\r\n  />\r\n);\r\n","import React, { useContext } from \"react\";\r\nimport { Header } from \"../header\";\r\nimport { ContextStore } from \"../utils/store\";\r\nimport { Button, Card } from \"antd\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FloatingButton } from \"../floating-button\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./styles.scss\";\r\nimport { PlotViewer } from \"../plot-viewer/plot-viewer\";\r\nimport { activities } from \"../enums\";\r\n\r\nexport const Plots = () => {\r\n  const { state } = useContext(ContextStore);\r\n\r\n  return (\r\n    <>\r\n      <Header></Header>\r\n      <div className=\"vaa-content\">\r\n        {state.jobs.map(job => (\r\n          <Link to={\"/job/\" + job.jobNumber}>\r\n            <div className=\"overview__job\">\r\n              <div\r\n                style={{\r\n                  width: \"120px\",\r\n                  display: \"inline-block\",\r\n                  float: \"left\"\r\n                }}\r\n              >\r\n                <PlotViewer\r\n                  mapStyle={{\r\n                    height: \"100px\",\r\n                    borderTopLeftRadius: \"5px\",\r\n                    borderBottomLeftRadius: \"5px\"\r\n                  }}\r\n                  plot={job.plot}\r\n                />\r\n              </div>\r\n              <div\r\n                style={{\r\n                  backgroundColor: \"white\",\r\n                  width: \"calc(100% - 120px)\",\r\n                  display: \"inline-block\",\r\n                  height: \"100%\",\r\n                  borderTopRightRadius: \"5px\",\r\n                  borderBottomRightRadius: \"5px\",\r\n                  padding: \"12px\",\r\n                  float: \"right\",\r\n                  fontSize: \"14px\",\r\n                  color: \"black\"\r\n                }}\r\n              >\r\n                <div>\r\n                  <b>{job.name}</b>\r\n                </div>\r\n                <div>\r\n                  {job.customer} {job.adres}\r\n                </div>\r\n                <div>{activities[job.activity]}</div>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n\r\n      <Link to=\"/create-plot\">\r\n        <FloatingButton />\r\n      </Link>\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Card } from \"antd\";\r\nimport { PlotViewer } from \"../plot-viewer/plot-viewer\";\r\nimport { activities } from \"../enums\";\r\n\r\nconst { Meta } = Card;\r\n\r\nexport const PlotCard = ({ children, job, style, mapStyle }) => {\r\n  return (\r\n    <Card\r\n      style={style}\r\n      cover={\r\n        <PlotViewer\r\n          mapStyle={{\r\n            ...mapStyle,\r\n            borderTopLeftRadius: \"5px\",\r\n            borderTopRightRadius: \"5px\"\r\n          }}\r\n          plot={job.plot}\r\n        />\r\n      }\r\n      bodyStyle={{\r\n        padding: \"8px 24px 12px 24px\"\r\n      }}\r\n    >\r\n      {children}\r\n    </Card>\r\n  );\r\n};\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport { ContextStore } from \"../utils/store\";\r\nimport { Header } from \"../header\";\r\nimport { PlotCard } from \"../card\";\r\nimport { Card } from \"antd\";\r\nimport { activities, materialLists } from \"../enums\";\r\nimport { Link } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nconst { Meta } = Card;\r\n\r\nconst selectFirstInnerMostArray = (array, index) => {\r\n  if (Array.isArray(array[0])) {\r\n    return selectFirstInnerMostArray(array[0], index);\r\n  } else {\r\n    return array[index];\r\n  }\r\n};\r\n\r\nexport const JobDetail = () => {\r\n  const { number } = useParams();\r\n  const { state } = useContext(ContextStore);\r\n  const [job, setJob] = useState();\r\n\r\n  useEffect(() => {\r\n    const tmp = state.jobs.find(job => job.jobNumber === number);\r\n    setJob(tmp);\r\n  }, [number]);\r\n\r\n  return (\r\n    <div>\r\n      <Header></Header>\r\n      <div style={{ padding: \"80px 24px 0\" }}>\r\n        {job ? (\r\n          <>\r\n            <PlotCard\r\n              job={job}\r\n              style={{ width: \"100%\" }}\r\n              mapStyle={{ height: \"150px\" }}\r\n            >\r\n              <Meta title={job.name} description={activities[job.activity]} />\r\n            </PlotCard>\r\n\r\n            <a\r\n              href={\r\n                \"https://www.google.com/maps/dir/?api=1&destination=\" +\r\n                selectFirstInnerMostArray(\r\n                  job.plot.feature.geometry.coordinates,\r\n                  1\r\n                ) +\r\n                \",\" +\r\n                selectFirstInnerMostArray(\r\n                  job.plot.feature.geometry.coordinates,\r\n                  0\r\n                )\r\n              }\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              <Card\r\n                hoverable\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"50px\",\r\n                  lineHeight: \"50px\",\r\n                  marginTop: \"12px\"\r\n                }}\r\n                bodyStyle={{\r\n                  padding: \"0\"\r\n                }}\r\n              >\r\n                Navigeer naar perceel\r\n              </Card>\r\n            </a>\r\n            <Link to={\"/job/\" + job.jobNumber + \"/activity/\"}>\r\n              <Card\r\n                hoverable\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"50px\",\r\n                  lineHeight: \"50px\",\r\n                  marginTop: \"12px\"\r\n                }}\r\n                bodyStyle={{\r\n                  padding: \"0\"\r\n                }}\r\n              >\r\n                Activiteit uitvoeren\r\n              </Card>\r\n            </Link>\r\n            <Card\r\n              style={{\r\n                width: \"100%\",\r\n                marginTop: \"12px\",\r\n                marginBottom: \"12px\",\r\n                textAlign: \"left\"\r\n              }}\r\n            >\r\n              <p>Datum: {moment(job.date).format(\"DD-MM-YYYY\")}</p>\r\n              <p>Klantnaam: {job.customer}</p>\r\n              <p>Klantnummer: {job.customerNumber}</p>\r\n              <p>Opdracht nummer: {job.jobNumber}</p>\r\n              <p>Adres: {job.adres}</p>\r\n              <p>Materiaal: {materialLists[job.activity][job.material]}</p>\r\n              <p>Remark: {job.remark}</p>\r\n            </Card>\r\n          </>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, createRef, useContext, useEffect } from \"react\";\r\nimport {\r\n  Button,\r\n  Modal,\r\n  Form,\r\n  Input,\r\n  Radio,\r\n  Drawer,\r\n  Select,\r\n  DatePicker,\r\n  TimePicker\r\n} from \"antd\";\r\nimport { activities, materialLists, employees } from \"../enums\";\r\nimport { PlotViewer } from \"../plot-viewer/plot-viewer\";\r\nimport moment from \"moment\";\r\nimport { ContextStore } from \"../utils/store\";\r\nconst { Option } = Select;\r\n\r\nexport const CreateActivityForm = ({ job, visible, onCancel, onCreate }) => {\r\n  const { state, dispatch } = useContext(ContextStore);\r\n  const formRef = createRef();\r\n\r\n  const [activity, setActivity] = useState();\r\n  const [material, setMaterial] = useState();\r\n\r\n  useEffect(() => {\r\n    if (job) {\r\n      setActivity(job.activity);\r\n      setMaterial(job.material);\r\n    }\r\n  }, [job]);\r\n\r\n  // console.log(selectedPlot);\r\n\r\n  const selectActivity = activity => {\r\n    setActivity(activity);\r\n    setMaterial(null);\r\n  };\r\n\r\n  const onFinish = result => {\r\n    // const job = {\r\n    //   ...result,\r\n    //   date: result.date.toDate().toISOString(),\r\n    //   plot: selectedPlot\r\n    // };\r\n    // console.log(job);\r\n    onCreate(result);\r\n    // dispatch({ type: \"addJob\", job: job });\r\n    // formRef.current.resetFields();\r\n  };\r\n\r\n  const onClose = () => {\r\n    onCancel();\r\n    formRef.current.resetFields();\r\n  };\r\n\r\n  return job ? (\r\n    <>\r\n      <Drawer\r\n        visible={visible}\r\n        title=\"Activiteit vastleggen\"\r\n        placement=\"bottom\"\r\n        onClose={onClose}\r\n        height={\"100%\"}\r\n      >\r\n        <PlotViewer\r\n          mapStyle={{\r\n            height: \"150px\",\r\n            marginBottom: \"24px\",\r\n            borderRadius: \"5px\"\r\n          }}\r\n          plot={job.plot}\r\n        ></PlotViewer>\r\n        <Form\r\n          layout=\"vertical\"\r\n          onFinish={onFinish}\r\n          initialValues={{\r\n            name: job.name,\r\n            employee: job.employee,\r\n            date: moment(job.date),\r\n            activity: job.activity,\r\n            material: job.material,\r\n            time: moment(job.time, \"HH : mm : ss\")\r\n          }}\r\n          ref={formRef}\r\n        >\r\n          <Form.Item\r\n            name=\"name\"\r\n            label=\"Naam perceel\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Naam van het perceel is vereist!\"\r\n              }\r\n            ]}\r\n          >\r\n            <Input />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"employee\"\r\n            label=\"Medewerker\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Medewerker is vereist!\"\r\n              }\r\n            ]}\r\n          >\r\n            <Select>\r\n              {Object.keys(employees).map(key => (\r\n                <Option value={key}>{employees[key]}</Option>\r\n              ))}\r\n            </Select>\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"date\"\r\n            label=\"Datum\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Datum is vereist!\"\r\n              }\r\n            ]}\r\n          >\r\n            <DatePicker format={\"DD-MM-YYYY\"} style={{ width: \"100%\" }} />\r\n          </Form.Item>\r\n\r\n          <Form.Item name=\"activity\" label=\"Activiteit\">\r\n            <Select onChange={selectActivity}>\r\n              {Object.keys(activities).map(key => (\r\n                <Option value={key}>{activities[key]}</Option>\r\n              ))}\r\n            </Select>\r\n          </Form.Item>\r\n          {activity ? (\r\n            materialLists[activity] ? (\r\n              <Form.Item name=\"material\" label=\"Materiaal / Gewas\">\r\n                <Select value={material} onChange={setMaterial}>\r\n                  {Object.keys(materialLists[activity]).map(key => (\r\n                    <Option value={key}>{materialLists[activity][key]}</Option>\r\n                  ))}\r\n                </Select>\r\n              </Form.Item>\r\n            ) : null\r\n          ) : null}\r\n          {material ? (\r\n            <Form.Item name=\"materialAmount\" label=\"Hoeveelheid materiaal\">\r\n              <Input />\r\n            </Form.Item>\r\n          ) : null}\r\n          <Form.Item\r\n            name=\"time\"\r\n            label=\"Tijd besteed\"\r\n            rules={[\r\n              {\r\n                required: true,\r\n                message: \"Tijd besteed is vereist!\"\r\n              }\r\n            ]}\r\n          >\r\n            <TimePicker\r\n              style={{ width: \"100%\" }}\r\n              defaultOpenValue={moment(\"00:00:00\", \"HH:mm:ss\")}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item name=\"remark\" label=\"Opmerking\">\r\n            <Input type=\"textarea\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            style={{\r\n              textAlign: \"right\",\r\n              right: 0,\r\n              bottom: 0,\r\n              width: \"100%\",\r\n              borderTop: \"1px solid #e9e9e9\",\r\n              padding: \"10px 16px\",\r\n              background: \"#fff\",\r\n              marginBottom: 0\r\n            }}\r\n          >\r\n            <Button onClick={onClose} style={{ marginRight: 24 }}>\r\n              Annuleren\r\n            </Button>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Vastleggen\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Drawer>\r\n    </>\r\n  ) : null;\r\n};\r\n","import React, { createRef, useContext, useState, useEffect } from \"react\";\r\nimport {\r\n  Map,\r\n  WMSTileLayer,\r\n  FeatureGroup,\r\n  GeoJSON,\r\n  AttributionControl,\r\n  ZoomControl,\r\n  LayersControl,\r\n  LayerGroup,\r\n  TileLayer\r\n} from \"react-leaflet\";\r\nimport { useParams } from \"react-router\";\r\nimport { ContextStore } from \"../utils/store\";\r\nimport \"./styles.scss\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport logo from \"../images/logo-wopa.jpg\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faStop, faStopwatch } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { CreatePlotForm } from \"../create-plot-form\";\r\nimport { CreateActivityForm } from \"../create-activity-form\";\r\n\r\nconst { BaseLayer, Overlay } = LayersControl;\r\n\r\nexport const Activity = ({ history }) => {\r\n  const { number } = useParams();\r\n  const { state } = useContext(ContextStore);\r\n  const [job, setJob] = useState();\r\n  const [startTime] = useState(new Date().getTime());\r\n  const [time, setTime] = useState(\"00 : 00 : 00\");\r\n  const [timer, setTimer] = useState();\r\n\r\n  const mapRef = createRef();\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setTimer(\r\n      setInterval(() => {\r\n        // Get today's date and time\r\n        var now = new Date().getTime();\r\n\r\n        // Find the distance between now and the count down date\r\n        var distance = now - startTime;\r\n\r\n        // Time calculations for days, hours, minutes and seconds\r\n        var days = Math.floor(distance / (1000 * 60 * 60 * 24));\r\n        var hours = Math.floor(\r\n          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\r\n        );\r\n        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\r\n        var seconds = Math.floor((distance % (1000 * 60)) / 1000);\r\n\r\n        setTime(\r\n          `${hours.toString().length === 1 ? \"0\" : \"\"}${hours} : ${\r\n            minutes.toString().length === 1 ? \"0\" : \"\"\r\n          }${minutes} : ${seconds.toString().length === 1 ? \"0\" : \"\"}${seconds}`\r\n        );\r\n      }, 1000)\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const tmp = state.jobs.find(job => job.jobNumber === number);\r\n    setJob(tmp);\r\n    mapRef.current.leafletElement.fitBounds(tmp.plot.bounds, {\r\n      padding: [5, 5]\r\n    });\r\n  }, [state.jobs, number]);\r\n\r\n  const openModal = () => {\r\n    clearInterval(timer);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setShowModal(false);\r\n  };\r\n\r\n  const onCreate = () => {\r\n    history.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"map\">\r\n      <Link to={\"/job/\" + number}>\r\n        <div className=\"like-leaflet logo\">\r\n          <img src={logo} alt=\"logo\" />\r\n\r\n          {/* <header>BEESPOT</header> */}\r\n        </div>\r\n      </Link>\r\n      <div className=\"buttons\">\r\n        <div className=\"like-leaflet timer\">\r\n          <FontAwesomeIcon className=\"stop-watch\" icon={faStopwatch} />\r\n          <div class=\"show-timer\">{time}</div>\r\n          <FontAwesomeIcon\r\n            onClick={openModal}\r\n            className=\"stop-button\"\r\n            icon={faStop}\r\n          />\r\n        </div>\r\n      </div>\r\n      <Map\r\n        ref={mapRef}\r\n        className=\"activity-viewer\"\r\n        zoom={10}\r\n        center={[51.84276079, 5.18380148]}\r\n        zoomControl={false}\r\n        attributionControl={false}\r\n      >\r\n        <AttributionControl position=\"topright\" />\r\n        <ZoomControl position=\"bottomright\" />\r\n        <LayersControl position=\"topright\">\r\n          {/* <BaseLayer name=\"Test\">\r\n                  <TileLayer\r\n                    attribution=\"&amp;copy PDOK\"\r\n                    url=\"https://geodata.nationaalgeoregister.nl/luchtfoto/infrarood/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=Actueel_ortho25IR&STYLE=default&TILEMATRIXSET=EPSG:3857&TILEMATRIX={z}&TILEROW={x}&TILECOL={y}&FORMAT=image%2Fpng\"\r\n                  />\r\n                </BaseLayer> */}\r\n          <BaseLayer checked name=\"Luchtfoto\">\r\n            <LayerGroup>\r\n              <WMSTileLayer\r\n                url=\"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wms?\"\r\n                layers=\"Actueel_ortho25\"\r\n              />\r\n              {/* <TileLayer\r\n                      url=\"https://geodata.nationaalgeoregister.nl/tiles/service/tms/1.0.0/lufolabels/EPSG:28992/{z}/{x}/{y}.png\"\r\n                      tms={true}\r\n                    /> */}\r\n            </LayerGroup>\r\n          </BaseLayer>\r\n          <BaseLayer name=\"Luchtfoto Infrarood\">\r\n            <WMSTileLayer\r\n              url=\"https://geodata.nationaalgeoregister.nl/luchtfoto/infrarood/wms?\"\r\n              layers=\"Actueel_ortho25IR\"\r\n            />\r\n          </BaseLayer>\r\n          <BaseLayer name=\"OpenStreetMap\">\r\n            <TileLayer\r\n              attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            />\r\n          </BaseLayer>\r\n        </LayersControl>\r\n        {/* <BaseLayer checked name=\"OpenStreetMap\">\r\n          <TileLayer\r\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n        </BaseLayer> */}\r\n        <WMSTileLayer\r\n          url=\"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wms?\"\r\n          layers=\"Actueel_ortho25\"\r\n        />\r\n        {job ? (\r\n          <FeatureGroup>\r\n            <GeoJSON\r\n              data={job.plot.feature}\r\n              style={{ color: \"#0088ff\", fillOpacity: 0 }}\r\n            />\r\n          </FeatureGroup>\r\n        ) : null}\r\n      </Map>\r\n      <CreateActivityForm\r\n        job={{ ...job, time: time }}\r\n        visible={showModal}\r\n        onCreate={onCreate}\r\n        onCancel={handleCancel}\r\n      ></CreateActivityForm>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport Viewer from \"./viewer/viewer\";\r\nimport { OpenLayers } from \"./open-layers/open-layers\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { Pic } from \"./pic\";\r\nimport { Plots } from \"./plots\";\r\nimport { ContextStoreProvider } from \"./utils/store\";\r\nimport { JobDetail } from \"./job-detail\";\r\nimport { Activity } from \"./activity\";\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <ContextStoreProvider>\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Plots} />\r\n            <Route exact path=\"/job/:number/activity\" component={Activity} />\r\n            <Route exact path=\"/job/:number\" component={JobDetail} />\r\n            <Route\r\n              exact\r\n              path=\"/create-plot\"\r\n              // render={() => {\r\n              //   return (\r\n              //     <Viewer promptInstall={this.props.promptInstall}></Viewer>\r\n              //   );\r\n              // }}\r\n              component={Viewer}\r\n            />\r\n            <Route exact path=\"/pic\" component={Pic} />\r\n            <Route path=\"/v2\" component={OpenLayers} />\r\n          </Switch>\r\n        </ContextStoreProvider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n"],"sourceRoot":""}